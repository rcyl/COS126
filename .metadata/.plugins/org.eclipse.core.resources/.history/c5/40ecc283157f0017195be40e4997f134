
/* register map */

r0 
r1 
r2 
r3 
r4 
r5
r6
r7
r8
r9 = t0
rA = t1
rB = t2
rC = t3
rD = const0
rE = const1
rF = const2

/* mem map, put in program */

mem[0x40] =  /* m0 store at location 0x40 */
mem[0x44] = 0x03 (011)
mem[0x45[ = 0x05 (101)
mem[0x46] = 0x05 (110)
mem[0x47] = 0x07 (111)

mem[FE] = 0xFFFF /* put constant into memory */

/* "load address" is anything, but "load" deferences memory */

load const1, 0xFE
load one, 0x1
load size, 4
load base, 0x40
load pbase, 0x044




main2:
	jal ra, loadandcheck
	loadaddr m0, cur
	
	jal ra, loadandcheck
	loadaddr m1, cur
	
	jal ra, loadandcheck
	loadaddr m2, cur
	
	jal ra, loadandcheck
	loadaddr m3, cur
	
	jal ra, loadandcheck
	loadaddr pa, cur
	
	jal ra, loadandcheck
	sl cur, cur, 1
	xor pa, pa, cur
	
	jal ra, loadandcheck
	sl cur, cur, 2
	xor, pa, pa, cur // pa contains bit shifted values of parity bits
	
	jal ra, parCorrect
	j main2

loadandcheck
	load cur, 0xFF /* read form stdin */
	xor temp, cur, const1 / temp = (cur == 0xFFFF) */
	bzero temp, halt /* end if cur == 0xFFFF */ 
	sind cur, 0 memX
	j ra

parCorrect
	load loc, mem0
	xor temp, pa, m011
	bzero temp, flip

flip
	load temp, loc
	xor temp, temp, one //flipping bit
	sind temp, 0, loc
	j print


do {
	print m[i]
} while (i < 4);

load idx, 0


print:
	lind temp, 0, idx // load mem[idx] to tmp
	load temp, 0xFF //print
	add idx, idx, one
	sub temp, size, idx
	bpos temp, print
halt:
	0000